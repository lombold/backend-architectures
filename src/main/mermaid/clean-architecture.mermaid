flowchart TB
    subgraph frameworks["Frameworks & Drivers"]
        springApp["SpringCleanArchitectureApplication"]
        springConfig["CleanArchitectureConfiguration"]
        springController["SpringTransferMoneyController"]
        jpaAccountEntity["AccountEntity (JPA)"]
        jpaRepository["JpaAccountRepository"]
        jpaGateway["JpaAccountRepositoryGateway"]
        accountMapper["CleanArchitectureAccountMapper"]
        notFoundException["NotFoundException"]

        subgraph adapters["Adapters"]
            webController["TransferMoneyController"]
            transferRequestDto["TransferMoneyRequest (DTO)"]
            balancePresenter["AccountBalancePresenter"]
            accountRepositoryAdapter["AccountRepositoryAdapter"]
            accountRepositoryGateway["AccountRepositoryGateway"]

            subgraph application["Application"]
                transferMoneyUseCase["TransferMoneyUseCase"]
                transferMoneyService["TransferMoneyService"]
                accountRepositoryPort["AccountRepository (output port)"]

                subgraph domain["Domain"]
                    transferDomainService["TransferMoneyDomainService"]
                    account["Account"]
                    money["Money"]
                    iban["IBAN"]
                end
            end
        end
    end

%% dependency arrows (pointing inward)
    springController --> webController
    webController --> transferMoneyUseCase
    transferMoneyService -. implements .-> transferMoneyUseCase
    transferMoneyService --> transferDomainService
    transferMoneyService --> accountRepositoryPort
    accountRepositoryAdapter -. implements .-> accountRepositoryPort
    accountRepositoryAdapter --> accountRepositoryGateway
    jpaGateway -. implements .-> accountRepositoryGateway
    jpaGateway --> jpaRepository
